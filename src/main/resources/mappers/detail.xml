<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="detail">

    <select id="count" resultType="int">
        select ifnull(cnt, 0) as ct
        from (
                 select od.od_num, mem_id, dt_prog, count(dt_prog) as cnt
                 from tb_order od join tb_detail dt
                                       on od.od_num = dt.od_num
                 where mem_id = #{mem_id}
                 group by dt_prog
                 order by dt_prog
             ) tba right join (select *
                               from (
                                        select 'J01' dt_prog from dual union all
                                        select 'J02' dt_prog from dual union all
                                        select 'J03' dt_prog from dual union all
                                        select 'J04' dt_prog from dual union all
                                        select 'J05' dt_prog from dual union all
                                        select 'J06' dt_prog from dual union all
                                        select 'J07' dt_prog from dual union all
                                        select 'J08' dt_prog from dual
                                    ) tbb
        ) tbc on tba.dt_prog = tbc.dt_prog
    </select>

</mapper>